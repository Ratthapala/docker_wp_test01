var XOFieaturedImageTool;(function(a){XOFieaturedImageTool=function(h){var e=this;var g=h.post_ids.length;var c=0;var f=0;var b=0;var d=false;this.sprintf=function(){var j=a.makeArray(arguments),l=j.shift(),k;for(k in j){l=l.replace("%s",j[k])}return l};this.updateStatus=function(i){c++;a("#xo-featured-image-bar").progressbar("value",(c/g)*100);a("#xo-featured-image-bar-percent").html(Math.round((c/g)*100)+"%");if(i.success){f++;a("#xo-featured-image-success-count").html(f)}else{b++;a("#xo-featured-image-error-count").html(b);a("#xo-featured-image-msg").append("<li>"+i.error+"</li>")}};this.finalization=function(){var i="";a("#xo-featured-image-stop-bottun").hide();if(b>0){i=this.sprintf(h.failure_message,b)}else{i=h.success_message}a("#xo-featured-image-message").hide();a("#message").html("<p><strong>"+i+"</strong></p>");a("#message").show()};this.init=function(i){a("#xo-featured-image-bar").progressbar();a("#xo-featured-image-bar-percent").html("0%");a("#xo-featured-image-stop-bottun").click(function(j){d=true;a("#xo-featured-image-stop-bottun").prop("disabled",true);a("#xo-featured-image-stop-bottun").val(h.stop_button_message)})};this.start=function(i){a.ajax({type:"POST",url:ajaxurl,data:{action:"xo_featured_image_tools",id:i,external_image:h.external_image,default_image:h.default_image},success:function(j){if(j!==Object(j)||(typeof j.success==="undefined"&&typeof j.error==="undefined")){j=new Object;j.success=false;j.error="Fatal error."}e.updateStatus(j);if(h.post_ids.length&&!d){e.start(h.post_ids.shift())}else{e.finalization()}},error:function(j){e.updateStatus(j);if(h.post_ids.length&&!d){e.start(h.post_ids.shift())}else{e.finalization()}}})};this.init();this.start(h.post_ids.shift())}}(jQuery));